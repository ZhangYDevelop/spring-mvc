<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"
        "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="com.zy.springmvc.mapper.UserMapper">
    <select id="getUserByName" parameterType="string" resultType="user">
        select * from sys_user where username = #{value};
    </select>

    <select id="getUserPermissionByUserName" parameterType="string" resultType="permission">
        select  permission.*  from sys_user user
          inner join sys_user_role user_role  on user.id = user_role.user_id
          inner join sys_role_permission rolepermission on rolepermission.role_id = user_role.role_id
          inner join sys_permission permission on permission.id = rolepermission.perm_id where  user.username = #{value};
    </select>

    <update id="updateUser" parameterType="user">
        update sys_user set password = #{password} where username=#{username}
    </update>
</mapper>